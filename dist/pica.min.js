/* pica 1.0.7 nodeca/pica */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var r;"undefined"!=typeof window?r=window:"undefined"!=typeof global?r=global:"undefined"!=typeof self&&(r=self),r.pica=e()}}(function(){return function e(r,t,n){function o(a,u){if(!t[a]){if(!r[a]){var f="function"==typeof require&&require;if(!u&&f)return f(a,!0);if(i)return i(a,!0);var s=new Error("Cannot find module '"+a+"'");throw s.code="MODULE_NOT_FOUND",s}var h=t[a]={exports:{}};r[a][0].call(h.exports,function(e){var t=r[a][1][e];return o(t?t:e)},h,h.exports,e,r,t,n)}return t[a].exports}for(var i="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({"./":[function(e,r,t){"use strict";function n(e){return Object.prototype.toString.call(e)}function o(e){return"[object Function]"===n(e)}function i(r,n){var o,i={src:r.src,dest:null,width:0|r.width,height:0|r.height,toWidth:0|r.toWidth,toHeight:0|r.toHeight,quality:r.quality,alpha:r.alpha,unsharpAmount:r.unsharpAmount,unsharpThreshold:r.unsharpThreshold};return u&&t.WW?(o=e("webworkify")(d),o.onmessage=function(e){var t,i,a=r.dest,u=e.data.output;if(a)if(a.set)a.set(u);else for(t=0,i=u.length;i>t;t++)a[t]=u[t];n(e.data.err,u),o.terminate()},r.transferable?o.postMessage(i,[r.src.buffer]):o.postMessage(i),o):(i.dest=r.dest,l(i,n),null)}function a(e,r,n,a){var u=e.width,f=e.height,s=r.width,c=r.height;if(o(n)&&(a=n,n={}),isNaN(n)||(n={quality:n,alpha:!1}),h&&t.WEBGL)return g(e,r,n,a);var l=r.getContext("2d"),d=l.getImageData(0,0,s,c),p={src:e.getContext("2d").getImageData(0,0,u,f).data,dest:d.data,width:e.width,height:e.height,toWidth:r.width,toHeight:r.height,quality:n.quality,alpha:n.alpha,unsharpAmount:n.unsharpAmount,unsharpThreshold:n.unsharpThreshold,transferable:!0};return i(p,function(e){return e?void a(e):(l.putImageData(d,0,0),void a())})}var u="undefined"!=typeof window&&"Worker"in window;if(u)try{var f=e("webworkify")(function(){});f.terminate()}catch(s){u=!1}var h=!1;try{if("undefined"!=typeof document&&"undefined"!=typeof window&&window.WebGLRenderingContext){var c=document.createElement("canvas");(c.getContext("webgl")||c.getContext("experimental-webgl"))&&(h=!0),c=null}}catch(s){}var l=e("./lib/resize"),d=e("./lib/resize_worker"),g=e("./lib/resize_webgl");t.resizeBuffer=i,t.resizeCanvas=a,t.WW=u,t.WEBGL=h},{"./lib/resize":4,"./lib/resize_webgl":5,"./lib/resize_worker":6,webworkify:7}],1:[function(e,r){"use strict";function t(e,r,t,n,i){var f,s,h,c,l,d,g,p=0,w=o,v=a;if(d=0,g=0,r>=v&&t>=v&&n>r+v&&i>t+v){for(s=0;3>s;s++)for(f=0;3>f;f++)h=r+f-v,c=t+s-v,g+=e[h+c*n]*w[p++];return(g-g%u)/u}for(s=0;3>s;s++)for(f=0;3>f;f++)h=r+f-v,c=t+s-v,h>=0&&n>h&&c>=0&&i>c&&(l=w[p],d+=l,g+=e[h+c*n]*l),p++;return(g-g%d)/d|0}function n(e,r,n){var o,i,a=new Uint16Array(e.length);for(o=0;r>o;o++)for(i=0;n>i;i++)a[i*r+o]=t(e,o,i,r,n);return a}for(var o=new Uint8Array([1,2,1,2,4,2,1,2,1]),i=Math.floor(Math.sqrt(o.length)),a=Math.floor(i/2),u=0,f=0;f<o.length;f++)u+=o[f];r.exports=n},{}],2:[function(e,r){"use strict";function t(e){return 0>e?0:e>255?255:e}function n(e){return Math.floor(e*c)}function o(e,r,t){var o,i,a,u,f,s,h,c,d,g,p,w,v,A,m,E,T,b=l[e].filter,y=t/r,x=1/y,_=Math.min(1,y),R=l[e].win/_,M=Math.floor(2*(R+1)),U=new Int16Array((M+2)*t),S=0;for(o=0;t>o;o++){for(i=(o+.5)*x,a=Math.max(0,Math.floor(i-R)),u=Math.min(r-1,Math.ceil(i+R)),f=u-a+1,s=new Float32Array(f),h=new Int16Array(f),c=0,g=a,p=0;u>=g;g++,p++)w=b((g+.5-i)*_),c+=w,s[p]=w;for(d=0,p=0;p<s.length;p++)v=n(s[p]/c),d+=v,h[p]=v;for(h[t>>1]+=n(1)-d,A=0;A<h.length&&0===h[A];)A++;if(A<h.length){for(m=h.length-1;m>0&&0===h[m];)m--;E=a+A,T=m-A+1,U[S++]=E,U[S++]=T,U.set(h.subarray(A,m+1),S),S+=T}else U[S++]=0,U[S++]=0}return U}function i(e,r,n,o,i,a){var u,f,s,h,c,l,d,g,p,w,v,A=0,m=0;for(p=0;o>p;p++){for(c=0,w=0;i>w;w++){for(l=a[c++],d=a[c++],g=A+4*l|0,u=f=s=h=0;d>0;d--)v=a[c++],h=h+v*e[g+3]|0,s=s+v*e[g+2]|0,f=f+v*e[g+1]|0,u=u+v*e[g]|0,g=g+4|0;r[m+3]=t(h>>14),r[m+2]=t(s>>14),r[m+1]=t(f>>14),r[m]=t(u>>14),m=m+4*o|0}m=4*(p+1)|0,A=(p+1)*n*4|0}}function a(e,r,n,o,i,a){var u,f,s,h,c,l,d,g,p,w,v,A=0,m=0;for(p=0;o>p;p++){for(c=0,w=0;i>w;w++){for(l=a[c++],d=a[c++],g=A+4*l|0,u=f=s=h=0;d>0;d--)v=a[c++],h=h+v*e[g+3]|0,s=s+v*e[g+2]|0,f=f+v*e[g+1]|0,u=u+v*e[g]|0,g=g+4|0;r[m+3]=t(h>>14),r[m+2]=t(s>>14),r[m+1]=t(f>>14),r[m]=t(u>>14),m=m+4*o|0}m=4*(p+1)|0,A=(p+1)*n*4|0}}function u(e,r,t){for(var n=3,o=r*t*4|0;o>n;)e[n]=255,n=n+4|0}function f(e){var r=e.src,t=e.width,n=e.height,f=e.toWidth,h=e.toHeight,c=e.dest||new Uint8Array(f*h*4),l="undefined"==typeof e.quality?3:e.quality,d=e.alpha||!1,g="undefined"==typeof e.unsharpAmount?0:0|e.unsharpAmount,p="undefined"==typeof e.unsharpThreshold?0:0|e.unsharpThreshold;if(1>t||1>n||1>f||1>h)return[];var w=o(l,t,f),v=o(l,n,h),A=new Uint8Array(f*n*4);return i(r,A,t,n,f,w),a(A,c,n,f,h,v),d||u(c,f,h),g&&s(c,f,h,g,1,p),c}var s=e("./unsharp"),h=14,c=1<<h,l=[{win:.5,filter:function(e){return e>=-.5&&.5>e?1:0}},{win:1,filter:function(e){if(-1>=e||e>=1)return 0;if(e>-1.1920929e-7&&1.1920929e-7>e)return 1;var r=e*Math.PI;return Math.sin(r)/r*(.54+.46*Math.cos(r/1))}},{win:2,filter:function(e){if(-2>=e||e>=2)return 0;if(e>-1.1920929e-7&&1.1920929e-7>e)return 1;var r=e*Math.PI;return Math.sin(r)/r*Math.sin(r/2)/(r/2)}},{win:3,filter:function(e){if(-3>=e||e>=3)return 0;if(e>-1.1920929e-7&&1.1920929e-7>e)return 1;var r=e*Math.PI;return Math.sin(r)/r*Math.sin(r/3)/(r/3)}}];r.exports=f},{"./unsharp":3}],3:[function(e,r){"use strict";function t(e){return 0>e?0:e>255?255:e}function n(e,r,t){var n,o,i=r*t,a=new Uint16Array(i);for(n=0,o=0;i>n;n++)a[n]=7471*e[o+2]+38470*e[o+1]+19595*e[o]>>>8,o=o+4|0;return a}function o(e,r,o,a,u,f){var s,h,c,l,d,g=0,p=Math.floor(256*a/50),w=n(e,r,o),v=i(w,r,o,1),A=f<<8,m=0;for(h=0;o>h;h++)for(s=0;r>s;s++)g=w[m]-v[m],Math.abs(g)>A&&(l=65536+(g*p>>8),d=4*m,c=e[d],e[d++]=t(c*l>>16),c=e[d],e[d++]=t(c*l>>16),c=e[d],e[d]=t(c*l>>16)),m++}var i=e("./blur");r.exports=o},{"./blur":1}],4:[function(e,r){"use strict";var t=e("./pure/resize");r.exports=function(e,r){var n=t(e);r(null,n)}},{"./pure/resize":2}],5:[function(e,r){"use strict";function t(e){try{(window.console.error||window.console.log)(e)}catch(r){}}function n(e){return e.getContext("webgl")||e.getContext("experimental-webgl")}function o(e,r,n){var o=e.createShader(r);return e.shaderSource(o,n),e.compileShader(o),e.getShaderParameter(o,e.COMPILE_STATUS)?o:(t("Shader compile error: "+e.getShaderInfoLog(o)+". Source: `"+n+"`"),e.deleteShader(o),null)}function i(e,r,n,o){var i=e.createProgram();return r.forEach(function(r){e.attachShader(i,r)}),n&&n.forEach(function(r,t){e.bindAttribLocation(i,o?o[t]:t,r)}),e.linkProgram(i),e.getProgramParameter(i,e.LINK_STATUS)?i:(t("Program linking error: "+e.getProgramInfoLog(i)),e.deleteProgram(i),null)}function a(e,r,t,n,o){var i=r,a=r+n,u=t,f=t+o;e.bufferData(e.ARRAY_BUFFER,new Float32Array([i,u,a,u,i,f,i,f,a,u,a,f]),e.STATIC_DRAW)}r.exports=function(e,r,t,u){var f=n(r),s=o(f,f.VERTEX_SHADER,$("#vertex-shader").text()),h=o(f,f.FRAGMENT_SHADER,$("#fragment-shader").text()),c=i(f,[s,h]);f.useProgram(c);var l=f.getAttribLocation(c,"a_texCoord");f.bindBuffer(f.ARRAY_BUFFER,f.createBuffer()),f.bufferData(f.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),f.STATIC_DRAW),f.enableVertexAttribArray(l),f.vertexAttribPointer(l,2,f.FLOAT,!1,0,0),f.bindTexture(f.TEXTURE_2D,f.createTexture()),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.NEAREST),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.NEAREST),f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,!0),f.texImage2D(f.TEXTURE_2D,0,f.RGBA,f.RGBA,f.UNSIGNED_BYTE,e),f.viewport(0,0,f.canvas.width,f.canvas.height);var d=f.getUniformLocation(c,"u_resolution");f.uniform2f(d,e.width,e.height),f.bindBuffer(f.ARRAY_BUFFER,f.createBuffer());var g=f.getAttribLocation(c,"a_position");f.enableVertexAttribArray(g),f.vertexAttribPointer(g,2,f.FLOAT,!1,0,0),a(f,0,0,e.width,e.height),f.drawArrays(f.TRIANGLES,0,6),u()}},{}],6:[function(e,r){"use strict";r.exports=function(r){var t=e("./resize");r.onmessage=function(e){t(e.data,function(e,t){return e?void r.postMessage({err:e}):void r.postMessage({output:t},[t.buffer])})}}},{"./resize":4}],7:[function(e,r){var t=arguments[3],n=arguments[4],o=arguments[5],i=JSON.stringify;r.exports=function(e){for(var r,a=Object.keys(o),u=0,f=a.length;f>u;u++){var s=a[u];if(o[s].exports===e){r=s;break}}if(!r){r=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var h={},u=0,f=a.length;f>u;u++){var s=a[u];h[s]=s}n[r]=[Function(["require","module","exports"],"("+e+")(self)"),h]}var c=Math.floor(Math.pow(16,8)*Math.random()).toString(16),l={};l[r]=r,n[c]=[Function(["require"],"require("+i(r)+")(self)"),l];var d="("+t+")({"+Object.keys(n).map(function(e){return i(e)+":["+n[e][0]+","+i(n[e][1])+"]"}).join(",")+"},{},["+i(c)+"])";return new Worker(window.URL.createObjectURL(new Blob([d],{type:"text/javascript"})))}},{}]},{},[])("./")});